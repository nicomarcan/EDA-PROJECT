package TPE;

import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import java.util.TreeSet;

import TPE.AirportManager.Node;

public class PathFinder {
	public static List<Flight> findPath(Set<Node> airports,Node source,Node dest,List<Day> departDays){
		Set<Integer> interval = new TreeSet<Integer>();
		Set<Node> posibleAirports = new HashSet<Node>();
 		for(int i = 0;i<departDays.size();i++){
			for(Node a : airports){
				if(!a.equals(source)){
					for(Flight f : source.priceFlight.get(a.airport).get(departDays.get(i))){
						interval.add(f.getDepartureTime()+f.getCurrentDayIndex()*60*24);
					}
				}
			}
		}
		 Collection<ArriveFunction> af = timeRefinement(airports,source,dest,interval);
	}

	private static Collection<ArriveFunction> timeRefinement(Set<Node> airports, Node source, Node dest,
			Set<Integer> interval) {
		Integer ti;
		Set<ArriveFunction> res = new HashSet<ArriveFunction>();
		Set<Integer> subInterval = interval.subset(ti);
		
		for(Node airport : airports){
			if(!airport.equals(source)){
				ArriveFunction a = new ArriveFunction(source,airport);
				for(Integer i : subInterval){
					a.getDepartToArrival().put(i, Integer.MAX_VALUE);
				}
				res.add(a);
			}else{
				ArriveFunction a = new ArriveFunction(source,source);
				for(Integer i : subInterval){
					a.getDepartToArrival().put(i, i);
				}
				res.add(a);
			}
		}
		
		
	}
	


}
